<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<head th:replace="layouts/fragments/head">
    <link rel="stylesheet" type="text/css"
          href="https://cdn.datatables.net/v/bs4/jq-3.6.0/dt-1.13.1/sp-2.1.0/datatables.min.css"/>

    <script type="text/javascript"
            src="https://cdn.datatables.net/v/bs4/jq-3.6.0/dt-1.13.1/sp-2.1.0/datatables.min.js"></script>

</head>
<body id="page-top">

<div id="wrapper" class="wrapper bg-ash">
    <!-- Header Menu Area Start Here -->
    <header th:replace="layouts/fragments/admin-header"></header>
    <!-- Header Menu Area End Here -->
    <!-- Page Area Start Here -->
    <div class="dashboard-page-one">
        <!-- Sidebar Area Start Here -->
        <div th:replace="layouts/fragments/school-sidebar"></div>
        <!-- Sidebar Area End Here -->
        <div class="dashboard-content-one vh-100">
            <!-- Breadcubs Area Start Here -->
            <div class="breadcrumbs-area">
                <h3 class="font-weight-bold mb-2"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add Student</h3>
                <p class="mb-0">Fill the below details</p>
            </div>


            <div class="row gutters-20 mb-4">
                <div class="col-md-8">
                    <div class="dashboard-summery-one mg-b-20">
                        <div class="add-school mt-2">
                            <form id="#" method="post" enctype="multipart/form-data" action="#">
                               <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">First Name</label>
                                            <input type="text" class="form-control" name="firstname" id="inputFirstName"
                                                   placeholder="e.g. John" required="">
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Last Name</label>
                                            <input type="text" class="form-control" name="lastname" id="inputLastName"
                                                   placeholder="e.g. Deo" required="">
                                            <span id="emailformat"> </span>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Email</label>
                                            <input type="email" class="form-control" name="email" id="inputEmail"
                                                   placeholder="example@gmail.com" required="">
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Contact No.</label>
                                            <input type="tel" class="form-control" name="contactNo" id="inputMobile"
                                                   placeholder="123-456-7890" maxlength="10" required="">
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Gender</label>
                                            <select class="form-control" name="Gender" id="inputGender">
                                                <option selected="true" disabled="disabled" value="">Select Gender
                                                </option>
                                                <option value="MALE">Male</option>
                                                <option value="FEMALE">Female</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Date of Birth</label>
                                            <input type="date" class="form-control" name="birthdate" id="inputDob"
                                                   placeholder="dd-mm-yy" required="">
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Permit No.</label>
                                            <input type="text" class="form-control" name="permitNo"
                                                   id="inputPermitNumber" placeholder="e.g. F123456789" required="">
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Student Fees</label>
                                            <input type="text" class="form-control" id="inputFee" placeholder="e.g. $100"
                                                   required="">
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label">Address</label>
                                            <input type="text" class="form-control" id="inputAddress" name="address" placeholder="Your Address"
                                                   required="">
                                        </div>
                                    </div>

<!--                                    <div class="col-md-6">-->
<!--                                        <div class="form-group">-->
<!--                                            <label class="form-label">Upload Student Photo</label>-->
<!--                                            <input type="file" class="form-control" name="uploadphoto" placeholder=""-->
<!--                                                   required="">-->
<!--                                        </div>-->
<!--                                    </div>-->

<!--                                    <div class="col-md-6">-->
<!--                                        <div class="form-group">-->
<!--                                            <label class="form-label">Upload CLP (Permit) </label>-->
<!--                                            <input type="file" class="form-control" name="clpPermit" placeholder=""-->
<!--                                                   required="">-->
<!--                                        </div>-->
<!--                                    </div>-->
                                </div>


                                <div class="btn-dash text-right mt-3">
                                    <button type="reset" class="btn btn-primary bg-white border-white">Reset</button>
                                    <button type="button" id="save" class="btn btn-primary ml-2">Save</button>
                                </div>

                            </form>

                        </div>
                    </div>
                </div>
            </div>

            <footer class="footer-wrap-layout1 dash-fot">
                <div class="copyright">&#169;Copyrights <a href="/">ELDT Inc.</a> 2022. All rights reserved.
                    Powered by <a href="#">Winggs</a>
                </div>
            </footer>
        </div>
    </div>
    <!-- Page Area End Here -->
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
<script src="static/js/main.js"></script>
<script>
    $(document).delegate('#save', 'click', function () {
        let headers = null;
        const formData = {
            firstName: document.getElementById('inputFirstName').value,
            lastName: document.getElementById('inputLastName').value,
            email: document.getElementById('inputEmail').value,
            mobile: document.getElementById('inputMobile').value,
            gender: document.getElementById('inputGender').value,
            permitNumber: document.getElementById('inputPermitNumber').value,
            fee: document.getElementById('inputFee').value,
            dob: document.getElementById('inputDob').value,
            address: document.getElementById('inputAddress').value,
        }
        if (!headers) {
            headers = {}
        }

        console.log('FormData',formData);
        $.ajax({
            url: url +'/schools/' + localStorage.getItem('school_id')+'/students',
            data: JSON.stringify(formData),
            type: "POST",
            contentType: "application/json;charset=utf-8",
            cache: false,
            headers: {
                headers,
                Authorization: 'Bearer ' + localStorage.getItem('access_token')
            },
            success: function (result) {
                console.log("Response is here : ", result);
                $("form").trigger("reset");
            },
            error: function () {
                console.log("Error : ")
            }
        });
    });

</script>

</body>

</html>