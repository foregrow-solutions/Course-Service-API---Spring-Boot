<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta property="og:title" content="ELDT Training online - ELDT Inc">
    <meta property="og:image" content="">
    <meta name="keywords" content="">
    <meta name="description"
          content="ELDT Inc delivers you an immersive experience for ELDT Training online to help you complete your ELDT Theory Instructions and get an FMCSA authorized certificate.">
    <meta name="google-site-verification" content="WLTuou9__z2OlMNj8qZpaFwB3luj1h109W4fSF3u7Lg"/>
    <link rel="icon" href="static/img/favicon.png">
    <title>ELDT Training online - ELDT Inc</title>
    <link rel="icon" href="static/img/favicon.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
    <link rel="stylesheet" type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.2.1/assets/owl.carousel.min.css">
    <link rel="stylesheet" type="text/css" href="/static/css/style.css">
    <!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/startbootstrap-sb-admin-2/4.1.4/css/sb-admin-2.min.css" rel="stylesheet">-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="static/env.js"></script>
</head>
<body>

<!-- Header Start ---->

<header th:replace="layouts/fragments/header"></header>
<!-- Header End ---->


<section class="login-reg-section bg-light">
    <div class="container">
        <div class="row login_bg-cst">
            <div class="col-md-8 mx-auto container_login">
                <div class="content_login text-center">
                    <h1>Register</h1>
                    <p class="mb-4">Get Started as a Student</p>
                    <form id="studentRegistration" name="studentRegistration" method="post"
                          enctype="multipart/form-data" action="addStudent">
                        <div class="row">
                            <input type="hidden" id="emailverify" value="0">
                            <input type="hidden" id="phoneverify" value="0">
                            <input type="hidden" id="phone_user">
                            <input type="hidden" id="phoneotp">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="text" class="form-control input_design" name="username"
                                           id="inputFirstName" placeholder="First Name" required>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="text" class="form-control input_design" name="lastname"
                                           id="inputLastName" placeholder="Last Name" required>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group">
                                    <select class="form-control input_design" name="Gender" id="inputGender">
                                        <option selected="true" disabled="disabled" value="">Select Gender
                                        </option>
                                        <option value="MALE">Male</option>
                                        <option value="FEMALE">Female</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="date" class="form-control input_design" name="dob" id="dob"
                                           placeholder="DOB" required>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="email" class="form-control input_design" name="email" id="inputEmail"
                                           placeholder="Email" required>
                                    <span class="mt-2 d-block" id="emailAlreadyExists"></span>

                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="text" class="form-control input_design" name="phone" id="inputMobile"
                                           placeholder="Contact No." maxlength="10" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="password" class="form-control input_design" name="password"
                                           id="inputPassword" placeholder="Password" required>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="password" class="form-control input_design" name="password"
                                           id="confirmPassword" placeholder="Confirm Password" required>
                                    <span class="mt-2 d-block" id="password-match"></span>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <input type="text" class="form-control input_design" name="permitno"
                                           id="inputPermitNumber"
                                           placeholder="Permit No." required>
                                </div>
                            </div>

                            <!--<div class="col-md-6">
                                <div class="form-group fileUploadWrap pt-0">
                                    <h5 class="fileName mb-1">Upload Permit File</h5>
                                    <input type="file" name="permitphoto" class="w-100 rounded-0 text-white"
                                           id="permitphoto" accept="image/png, image/jpeg" required>
                                    <input type="hidden" id="permitfilepath">
                                </div>
                            </div> -->
                        </div>
                        <button type="button" id="save" class="btn login_btn w-50">Sign up</button>
                        <p class="mt-2"><small>Already a member?</small> <a class="fp" href="/login">Login</a></p>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer Start ---->

<footer th:replace="layouts/fragments/footer"></footer>

<!-- Footer End ---->


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.2.1/owl.carousel.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/SlickNav/1.0.10/jquery.slicknav.js"></script>
<script src="static/js/main.js"></script>
<script>
    $(document).delegate('#save', 'click', function () {
        let headers = null;
        const formData = {
            firstName: document.getElementById('inputFirstName').value,
            lastName: document.getElementById('inputLastName').value,
            mobile: document.getElementById('inputMobile').value,
            permitNo: document.getElementById('inputPermitNumber').value,
            dob: document.getElementById('dob').value,
            username: document.getElementById('inputEmail').value,
            gender: document.getElementById('inputGender').value,
            password: document.getElementById('inputPassword').value,
        }
        if (!headers) {
            headers = {}
        }
        console.log('FormData',formData);
        $.ajax({
            url: url + "/auth/register",
            data: JSON.stringify(formData),
            type: "POST",
            contentType: "application/json;charset=utf-8",
            cache: false,
            headers: {
                headers,
            },
            success: function (result) {
                localStorage.setItem('access_token',result.access_token);
                    window.location.href = '/login';
            },
            error: function (err) {
                console.log("Error :",err)
                if(err.status == 500){
                    console.log("Error is here : ", err.responseJSON.message);
                  $('#emailAlreadyExists').html(err.responseJSON.message).css('color', 'red');
                }else if(err.status == 400){
                    alert("All Given Field are required");
                }
            }
        });
    });

    $('inputEmail').on('keyup', function(){
        $('#emailAlreadyExists').html('');
    })

    $('#confirmPassword').on('keyup', function() {
        var password1 = $('#inputPassword').val();
        var password2 = $('#confirmPassword').val();
        if (password1 != password2) {
            $('#update-profile-pwd').prop('disabled', true);
            $('#password-match').html('Passwords do not match').css('color', 'red');
        }else{
            $('#update-profile-pwd').prop('disabled', false);
            $('#password-match').html('');
        }
    });



</script>
</body>
</html>